<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Онлайн фонарик</title>
  <style>
    :root {
      --ui-bg: rgba(0, 0, 0, 0.45);
      --ui-border: rgba(255, 255, 255, 0.15);
      --ui-text: #ffffff;
    }

    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      transition: background-color 0.4s ease;
    }

    body {
      background-color: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .panel {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--ui-bg);
      backdrop-filter: blur(16px);
      border: 1px solid var(--ui-border);
      border-radius: 20px;
      padding: 14px 18px;
      display: flex;
      gap: 14px;
      align-items: center;
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
    }

    .btn {
      background: rgba(255,255,255,0.12);
      border: 1px solid var(--ui-border);
      color: var(--ui-text);
      padding: 10px 16px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 15px;
      transition: background 0.2s ease, transform 0.1s ease;
    }

    .btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .btn:active {
      transform: scale(0.96);
    }

    input[type="color"] {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      border: none;
      padding: 0;
      background: none;
      cursor: pointer;
    }

    input[type="color"]::-webkit-color-swatch {
      border-radius: 12px;
      border: none;
    }

    .hint {
      position: fixed;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      letter-spacing: 0.3px;
      user-select: none;
    }
  </style>
</head>
<body>

  <div class="hint">Онлайн фонарик — выбери цвет</div>

  <button class="btn" id="togglePanel" style="position:fixed;bottom:24px;right:24px;z-index:10;">Скрыть</button>

  <div class="panel" id="panel">
    <button class="btn" id="reset">Выключить</button>
    <button class="btn" data-mode="static">Статика</button>
    <input type="color" id="colorPicker" value="#ffffff" />
    <button class="btn" data-mode="disco">Дискотека</button>
    <button class="btn" data-mode="candle">Свеча</button>
    <button class="btn" data-mode="ocean">Океан</button>
    <button class="btn" data-mode="beacon">Мигалка</button>
    <button class="btn" data-mode="pulse">Пульс</button>
    <button class="btn" data-mode="rainbow">Радуга</button>
    <button class="btn" data-mode="sos">SOS</button>
    <button class="btn" data-mode="fire">Костёр</button>
  </div>

  <script>
    const picker = document.getElementById('colorPicker');
    const resetBtn = document.getElementById('reset');
    const panel = document.getElementById('panel');
    const togglePanelBtn = document.getElementById('togglePanel');
    const modeButtons = document.querySelectorAll('[data-mode]');

    let interval = null;
    let lastStaticColor = '#ffffff';

    function clearMode() {
      if (interval) {
        clearInterval(interval);
        interval = null;
      }
    }

    picker.addEventListener('input', (e) => {
      clearMode();
      lastStaticColor = e.target.value;
      document.body.style.backgroundColor = lastStaticColor;
    });

    togglePanelBtn.addEventListener('click', () => {
      const hidden = panel.style.display === 'none';
      panel.style.display = hidden ? 'flex' : 'none';
      togglePanelBtn.textContent = hidden ? 'Скрыть' : 'Показать';
    });

    resetBtn.addEventListener('click', () => {
      clearMode();
      document.body.style.backgroundColor = '#000000';
    });

    modeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        clearMode();
        const mode = btn.dataset.mode;

        if (mode === 'static') {
          document.body.style.backgroundColor = lastStaticColor;
        }

        if (mode === 'disco') {
          interval = setInterval(() => {
            const hue = Math.floor(Math.random() * 360);
            document.body.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;
          }, 200);
        }

        if (mode === 'candle') {
          interval = setInterval(() => {
            const flicker = Math.random() * 10;
            document.body.style.backgroundColor = `hsl(35, 100%, ${45 + flicker}%)`;
          }, 120);
        }

        if (mode === 'ocean') {
          let hue = 185; // лазурный
          let dir = 1;
          interval = setInterval(() => {
            hue += dir * 0.6;
            if (hue > 220 || hue < 185) dir *= -1; // до глубокого синего
            document.body.style.backgroundColor = `hsl(${hue}, 90%, 45%)`;
          }, 50);
        }

        if (mode === 'beacon') {
          let step = 0;
          const sequence = [
            '#ff0000', '#000000', '#ff0000', '#000000',
            '#0000ff', '#000000', '#0000ff', '#000000'
          ];

          interval = setInterval(() => {
            document.body.style.backgroundColor = sequence[step];
            step = (step + 1) % sequence.length;
          }, 150);
        }

        if (mode === 'pulse') {
          let t = 0;
          interval = setInterval(() => {
            const light = 40 + Math.sin(t) * 20;
            document.body.style.backgroundColor = `hsl(0, 0%, ${light}%)`;
            t += 0.15;
          }, 50);
        }

        if (mode === 'rainbow') {
          let hue = 0;
          interval = setInterval(() => {
            document.body.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;
            hue = (hue + 1) % 360;
          }, 30);
        }

        if (mode === 'sos') {
          const dot = 200;
          const dash = 600;
          const pause = 200;
          const sequence = [
            ['#fff', dot], ['#000', pause],
            ['#fff', dot], ['#000', pause],
            ['#fff', dot], ['#000', pause * 3],
            ['#fff', dash], ['#000', pause],
            ['#fff', dash], ['#000', pause],
            ['#fff', dash], ['#000', pause * 3],
            ['#fff', dot], ['#000', pause],
            ['#fff', dot], ['#000', pause],
            ['#fff', dot], ['#000', pause * 6]
          ];

          let i = 0;
          function runSOS() {
            document.body.style.backgroundColor = sequence[i][0];
            setTimeout(() => {
              i = (i + 1) % sequence.length;
              if (interval) runSOS();
            }, sequence[i][1]);
          }
          interval = true;
          runSOS();
        }

        if (mode === 'fire') {
          interval = setInterval(() => {
            const hue = 20 + Math.random() * 20;
            const light = 35 + Math.random() * 20;
            document.body.style.backgroundColor = `hsl(${hue}, 100%, ${light}%)`;
          }, 100);
        }
      });
    });
  </script>

</body>
</html>
